# find the maximum value
# in a nul-terminated array
# of unsigned bytes
#
# b input array
# a output max

function $test() {
@start
@loop
	%max =w phi @start -1, @new %byt, @old %max
	%loc =l phi @start $b,  @new %loc1, @old %loc1
	%byt =w loadub %loc
	%loc1 =l add 1, %loc
	jnz %byt, @iter, @end
@iter
	%cmp =w csle %max, %byt
	jnz %cmp, @new, @old
@new
	jmp @loop
@old
	jmp @loop
@end
	storew %max, $a
	ret
}
